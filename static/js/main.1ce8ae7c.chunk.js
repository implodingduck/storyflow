(this.webpackJsonpstoryflow=this.webpackJsonpstoryflow||[]).push([[0],{196:function(t,e,n){"use strict";n.r(e);var s=n(1),r=n.n(s),o=n(75),a=n.n(o),i=(n(81),n(82),n(29)),l=n(41),c=n(19),h=n(22),d=n.n(h);function f(t){var e=t?t.toString(36):"0";return e.length%2&&(e="0"+e),e}function u(t){try{return parseInt(t,36)}catch(e){return 0}}function j(t){for(var e={},n=0;n<t.length;n+=4){var s=t.substr(n,4),r=u(s.substr(0,2)),o=u(s.substr(2,2));e[String(r)]=String(o)}return e}var p=n(0);var x=function t(e){var n=e.flow,s=e.flowid,r=e.flowhash,o=e.setFlowhash,a=function(){var t=j(r);return t[s]||0===t[s]?t[s]:-1}(),i=function(t){o(s,t.target.value)};return Object(p.jsxs)("div",{className:"flow",children:[Object(p.jsx)(d.a,{children:n[s].text}),Object(p.jsx)("ul",{children:n[s].paths.map((function(t,e){return Object(p.jsx)("li",{children:Object(p.jsxs)("label",{children:[Object(p.jsx)("input",{type:"radio",name:s,value:e,onChange:i,checked:a===String(e)})," ",Object(p.jsx)(d.a,{children:t.text})]})},e)}))}),-1!==a&&n[s].paths[a].next?Object(p.jsx)(t,{flow:n,flowid:n[s].paths[a].next,flowhash:r,setFlowhash:o}):"",Object(p.jsx)("pre",{style:{display:"none"},children:JSON.stringify(n,null,2)})]})},O=n(2),b=n(30);var g=function(t){var e=t.story,n=Object(O.g)().flowhash,o=void 0===n?"":n,a=Object(O.f)(),i=r.a.useState(""),h=Object(c.a)(i,2),u=h[0],g=h[1],y=function(t,e,n){return t[e].paths[n[e]]&&t[e].paths[n[e]].next?t[e].paths[n[e]].next:-1},w=Object(s.useCallback)((function(t,e,n){var s=[];s.push(e);for(var r=y(t,e,n);-1!==r;)s.push(r),r=y(t,r,n);return s}),[]);return Object(s.useEffect)((function(){var t,n="",s=j(o),r=w(e.flow,e.start,s),a=Object(l.a)(r);try{for(a.s();!(t=a.n()).done;){var i=t.value;console.log("snippet"),console.log(i),s[i]&&(n+=e.flow[i].paths[s[i]].snippet+" ")}}catch(c){a.e(c)}finally{a.f()}g(n)}),[o,e,w,g]),Object(p.jsxs)("div",{children:[Object(p.jsxs)("h1",{children:["Hello, it is time for a story ",Object(p.jsx)("span",{style:{display:"none"},children:o})]}),Object(p.jsx)("div",{className:"flowcontainer",children:Object(p.jsx)(x,{flow:e.flow,flowid:e.start,flowhash:o,setFlowhash:function(t,n){var s=j(o);s[t]=n,console.log(typeof t);var r=w(e.flow,e.start,s);console.log(s),console.log(r);var i,c={},h=Object(l.a)(r);try{for(h.s();!(i=h.n()).done;){var d=i.value;console.log(d),console.log(typeof d),s[d]&&(c[d]=s[d])}}catch(u){h.e(u)}finally{h.f()}console.log(c),a.push("/"+function(t){var e="";return Object.keys(t).forEach((function(n){console.log("Before: "+n);var s=f(parseInt(n));console.log("After: "+s),e+=s,e+=f(t[n])})),e}(c)),g("")}})}),Object(p.jsx)("div",{className:"markdowncontainer",children:Object(p.jsx)(d.a,{children:u})}),Object(p.jsx)("pre",{style:{display:"none"},children:JSON.stringify(e,null,2)}),""!==o?Object(p.jsxs)("div",{className:"sharestory",children:["Share your story: ",Object(p.jsx)(b.b,{to:o,children:window.location.href})]}):""]})};var y=function(t){var e=t.flowid,n=t.flow,s=t.story,o=t.setStory,a=r.a.useState(!0),i=Object(c.a)(a,2),l=i[0],h=i[1];return Object(p.jsx)("div",{children:Object(p.jsxs)("fieldset",{children:[Object(p.jsx)("legend",{children:e}),Object(p.jsx)("button",{onClick:function(){var t=JSON.parse(JSON.stringify(s));delete t.story.flow[e],o(t)},children:"Delete Flow"}),Object(p.jsxs)("label",{children:["Text: ",Object(p.jsx)("input",{type:"text",onChange:function(t){var n=JSON.parse(JSON.stringify(s));n.story.flow[e].text=t.target.value,o(n)},value:n.text})]}),Object(p.jsx)("button",{onClick:function(){h(!l)},style:{float:"right"},children:l?"Hide":"Show"}),Object(p.jsxs)("div",{style:{display:l?"block":"none"},children:["Paths:",n.paths.map((function(t,n){return Object(p.jsxs)("fieldset",{children:[Object(p.jsx)("legend",{children:n}),Object(p.jsx)("button",{onClick:function(t){return function(t,n){var r=JSON.parse(JSON.stringify(s));r.story.flow[e].paths.splice(n,1),o(r)}(0,n)},children:"Delete Path"}),Object(p.jsxs)("label",{children:["Text: ",Object(p.jsx)("input",{type:"text",onChange:function(t){return function(t,n){var r=JSON.parse(JSON.stringify(s));r.story.flow[e].paths[n].text=t.target.value,o(r)}(t,n)},value:t.text})]}),Object(p.jsxs)("label",{children:["Next: ",Object(p.jsxs)("select",{onChange:function(t){return function(t,n){var r=JSON.parse(JSON.stringify(s));r.story.flow[e].paths[n].next=t.target.value,o(r)}(t,n)},children:[Object(p.jsx)("option",{children:"[End]"}),Object.keys(s.story.flow).map((function(e,n){return Object(p.jsxs)("option",{value:e,selected:t.next===e,children:["(",e,") ",s.story.flow[e].text]})}))]})]}),Object(p.jsxs)("label",{children:["Snippet: ",Object(p.jsx)("textarea",{onChange:function(t){return function(t,n){var r=JSON.parse(JSON.stringify(s));r.story.flow[e].paths[n].snippet=t.target.value,o(r)}(t,n)},defaultValue:t.snippet})]}),Object(p.jsxs)("label",{children:["Relevant Links: ",Object(p.jsx)("textarea",{onChange:function(t){return function(t,n){var r=JSON.parse(JSON.stringify(s));r.story.flow[e].paths[n].links=t.target.value,o(r)}(t,n)},defaultValue:t.links})]}),Object(p.jsxs)("label",{children:["What We Know: ",Object(p.jsx)("textarea",{onChange:function(t){return function(t,n){var r=JSON.parse(JSON.stringify(s));r.story.flow[e].paths[n].known=t.target.value,o(r)}(t,n)},defaultValue:t.known})]})]},n)})),Object(p.jsx)("button",{onClick:function(){var t=JSON.parse(JSON.stringify(s));t.story.flow[e].paths.push({text:"Path Text...replace me please",next:"",snippet:""}),o(t)},children:"Add Path"})]})]})})};var w=function(){var t=r.a.useState(localStorage.getItem("editorstory")?JSON.parse(localStorage.getItem("editorstory")):i),e=Object(c.a)(t,2),n=e[0],s=e[1];return r.a.useEffect((function(){localStorage.setItem("editorstory",JSON.stringify(n))}),[n]),Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:"Editor"}),Object(p.jsxs)("div",{className:"flowcontainer",children:[Object(p.jsxs)("label",{children:["Title: ",Object(p.jsx)("input",{type:"text",onChange:function(t){console.log("handleTitle: "+t.target.value);var e=JSON.parse(JSON.stringify(n));e.story.name=t.target.value,s(e)},value:n.story.name})]}),Object.keys(n.story.flow).map((function(t,e){return Object(p.jsx)(y,{flowid:t,flow:n.story.flow[t],story:n,setStory:s},e)})),Object(p.jsx)("button",{onClick:function(){var t=JSON.parse(JSON.stringify(n)),e=function(t){var e=0;return Object.keys(t).map((function(t){return parseInt(t)>=e&&(e=parseInt(t)+1),""})),e+""}(t.story.flow);console.log("trying to add... "+e),t.story.flow[e]={text:"Flow Text...replace me please",paths:[{text:"Path Text...replace me please",next:"",snippet:""}]},s(t)},children:"Add Flow"})]}),Object(p.jsx)("div",{className:"markdowncontainer",children:Object(p.jsx)("pre",{children:JSON.stringify(n,null,2)})}),Object(p.jsx)("button",{onClick:function(){localStorage.clear()},children:"Clear Local Storage"})]})};var v=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(b.a,{children:Object(p.jsxs)(O.c,{children:[Object(p.jsx)(O.a,{path:"/editor",children:Object(p.jsx)(w,{})}),Object(p.jsx)(O.a,{path:"/:flowhash?",children:Object(p.jsx)(g,{story:i.story})})]})})})},S=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,197)).then((function(e){var n=e.getCLS,s=e.getFID,r=e.getFCP,o=e.getLCP,a=e.getTTFB;n(t),s(t),r(t),o(t),a(t)}))};a.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(v,{})}),document.getElementById("root")),S()},29:function(t){t.exports=JSON.parse('{"story":{"name":"Dragon Story","version":"1.0.0","start":"0","flow":{"0":{"text":"Which region does your [dragon](https://www.google.com/search?q=dragon) come from?","paths":[{"text":"Eastern","next":"10","snippet":"# A Dragon Story...\\nThere once was a dragon from the Eastern region"},{"text":"Western","next":"20","snippet":"# A Dragon Story...\\nThere once was a dragon from the Western region"}]},"3":{"text":"What color is your dragon?","paths":[{"text":"Red","next":"4","snippet":"The dragon was a lovely shade of red,"},{"text":"Green","next":"4","snippet":"The dragon was a lovely shade of green,"},{"text":"Blue","next":"4","snippet":"The dragon was a lovely shade of blue,"}]},"4":{"text":"Where does your dragon want to visit?","paths":[{"text":"The Ocean","snippet":"and wanted to visit the Ocean.\\n\\n"},{"text":"The Forest","snippet":"and wanted to visit the Forest.\\n\\n"},{"text":"The Mountains","snippet":"and wanted to visit the Mountains.\\n\\n"},{"text":"The Plains","snippet":"and wanted to visit the Plains.\\n\\n"},{"text":"The Swamp","snippet":"and wanted to visit the Swamp.\\n\\n"}]},"10":{"text":"Does your dragon have wings?","paths":[{"text":"Yes","next":"3","snippet":"who flew with its wings."},{"text":"No","next":"3","snippet":"who flew without wings."}]},"20":{"text":"Is your dragon Bipedal or Quadpedal?","paths":[{"text":"Bipedal","next":"3","snippet":"with 2 feet and wings for arms."},{"text":"Quadpedal","next":"3","snippet":"with 2 arms, 2 feet and wings."}]}}}}')},81:function(t,e,n){},82:function(t,e,n){}},[[196,1,2]]]);
//# sourceMappingURL=main.1ce8ae7c.chunk.js.map