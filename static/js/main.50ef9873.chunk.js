(this.webpackJsonpstoryflow=this.webpackJsonpstoryflow||[]).push([[0],{196:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),o=n(75),a=n.n(o),i=(n(81),n(82),n(29)),l=n(41),c=n(19),h=n(22),d=n.n(h);function p(e){var t=e?e.toString(36):"0";return t.length%2&&(t="0"+t),t}function j(e){try{return parseInt(e,36)}catch(t){return 0}}function f(e){for(var t={},n=0;n<e.length;n+=4){var s=e.substr(n,4),r=j(s.substr(0,2)),o=j(s.substr(2,2));t[String(r)]=String(o)}return t}var u=n(0);var x=function e(t){var n=t.flow,s=t.flowid,r=t.flowhash,o=t.setFlowhash,a=function(){var e=f(r);return e[s]||0===e[s]?e[s]:-1}(),i=function(e){o(s,e.target.value)};return Object(u.jsxs)("div",{className:"flow",children:[Object(u.jsx)(d.a,{children:n[s].text}),Object(u.jsx)("ul",{children:n[s].paths.map((function(e,t){return Object(u.jsx)("li",{children:Object(u.jsxs)("label",{children:[Object(u.jsx)("input",{type:"radio",name:s,value:t,onChange:i,checked:a===String(t)})," ",Object(u.jsx)(d.a,{children:e.text})]})},t)}))}),-1!==a&&n[s].paths[a].next?Object(u.jsx)(e,{flow:n,flowid:n[s].paths[a].next,flowhash:r,setFlowhash:o}):"",Object(u.jsx)("pre",{style:{display:"none"},children:JSON.stringify(n,null,2)})]})},O=n(2),b=n(30);var g=function(e){var t=e.story,n=Object(O.g)().flowhash,o=void 0===n?"":n,a=Object(O.f)(),i=r.a.useState(""),h=Object(c.a)(i,2),j=h[0],g=h[1],w=function(e,t,n){return e[t].paths[n[t]]&&e[t].paths[n[t]].next?e[t].paths[n[t]].next:-1},y=Object(s.useCallback)((function(e,t,n){var s=[];s.push(t);for(var r=w(e,t,n);-1!==r;)s.push(r),r=w(e,r,n);return s}),[]);return Object(s.useEffect)((function(){var e,n="",s=f(o),r=y(t.flow,t.start,s),a=Object(l.a)(r);try{for(a.s();!(e=a.n()).done;){var i=e.value;console.log("snippet"),console.log(i),s[i]&&(n+=t.flow[i].paths[s[i]].snippet+" ")}}catch(c){a.e(c)}finally{a.f()}g(n)}),[o,t,y,g]),Object(u.jsxs)("div",{children:[Object(u.jsxs)("h1",{children:["Hello, it is time for a story ",Object(u.jsx)("span",{style:{display:"none"},children:o})]}),Object(u.jsx)("div",{className:"flowcontainer",children:Object(u.jsx)(x,{flow:t.flow,flowid:t.start,flowhash:o,setFlowhash:function(e,n){var s=f(o);s[e]=n,console.log(typeof e);var r=y(t.flow,t.start,s);console.log(s),console.log(r);var i,c={},h=Object(l.a)(r);try{for(h.s();!(i=h.n()).done;){var d=i.value;console.log(d),console.log(typeof d),s[d]&&(c[d]=s[d])}}catch(j){h.e(j)}finally{h.f()}console.log(c),a.push("/"+function(e){var t="";return Object.keys(e).forEach((function(n){console.log("Before: "+n);var s=p(parseInt(n));console.log("After: "+s),t+=s,t+=p(e[n])})),t}(c)),g("")}})}),Object(u.jsx)("div",{className:"markdowncontainer",children:Object(u.jsx)(d.a,{children:j})}),Object(u.jsx)("pre",{style:{display:"none"},children:JSON.stringify(t,null,2)}),""!==o?Object(u.jsxs)("div",{className:"sharestory",children:["Share your story: ",Object(u.jsx)(b.b,{to:o,children:window.location.href})]}):""]})};var w=function(e){var t=e.flowid,n=e.flow,s=e.story,o=e.setStory,a=r.a.useState(!0),i=Object(c.a)(a,2),l=i[0],h=i[1];return Object(u.jsx)("div",{children:Object(u.jsxs)("fieldset",{children:[Object(u.jsx)("legend",{children:t}),Object(u.jsxs)("label",{children:["Text: ",Object(u.jsx)("input",{type:"text",onChange:function(e){var n=JSON.parse(JSON.stringify(s));n.story.flow[t].text=e.target.value,o(n)},value:n.text})]}),Object(u.jsx)("button",{onClick:function(){h(!l)},style:{float:"right"},children:l?"Hide":"Show"}),Object(u.jsxs)("div",{style:{display:l?"block":"none"},children:["Paths:",n.paths.map((function(e,n){return Object(u.jsxs)("fieldset",{children:[Object(u.jsx)("legend",{children:n}),Object(u.jsxs)("label",{children:["Text: ",Object(u.jsx)("input",{type:"text",onChange:function(e){return function(e,n){var r=JSON.parse(JSON.stringify(s));r.story.flow[t].paths[n].text=e.target.value,o(r)}(e,n)},value:e.text})]}),Object(u.jsxs)("label",{children:["Next: ",Object(u.jsxs)("select",{onChange:function(e){return function(e,n){var r=JSON.parse(JSON.stringify(s));r.story.flow[t].paths[n].next=e.target.value,o(r)}(e,n)},children:[Object(u.jsx)("option",{children:"[End]"}),Object.keys(s.story.flow).map((function(t,n){return Object(u.jsxs)("option",{value:t,selected:e.next===t,children:["(",t,") ",s.story.flow[t].text]})}))]})]}),Object(u.jsxs)("lable",{children:["Snippet: ",Object(u.jsx)("textarea",{onChange:function(e){return function(e,n){var r=JSON.parse(JSON.stringify(s));r.story.flow[t].paths[n].snippet=e.target.value,o(r)}(e,n)},defaultValue:e.snippet})]})]},n)})),Object(u.jsx)("button",{onClick:function(){var e=JSON.parse(JSON.stringify(s));e.story.flow[t].paths.push({text:"Path Text...replace me please",next:"",snippet:""}),o(e)},children:"Add Path"})]})]})})};var y=function(){var e=r.a.useState(i),t=Object(c.a)(e,2),n=t[0],s=t[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:"Editor"}),Object(u.jsxs)("div",{className:"flowcontainer",children:[Object(u.jsxs)("label",{children:["Title: ",Object(u.jsx)("input",{type:"text",onChange:function(e){console.log("handleTitle: "+e.target.value);var t=JSON.parse(JSON.stringify(n));t.story.name=e.target.value,s(t)},value:n.story.name})]}),Object.keys(n.story.flow).map((function(e,t){return Object(u.jsx)(w,{flowid:e,flow:n.story.flow[e],story:n,setStory:s},t)})),Object(u.jsx)("button",{onClick:function(){var e=JSON.parse(JSON.stringify(n)),t=function(e){var t=0;return Object.keys(e).map((function(e){return parseInt(e)>=t&&(t=parseInt(e)+1),""})),t+""}(e.story.flow);console.log("trying to add... "+t),e.story.flow[t]={text:"Flow Text...replace me please",paths:[{text:"Path Text...replace me please",next:"",snippet:""}]},s(e)},children:"Add Flow"})]}),Object(u.jsx)("div",{className:"markdowncontainer",children:Object(u.jsx)("pre",{children:JSON.stringify(n,null,2)})})]})};var v=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(b.a,{children:Object(u.jsxs)(O.c,{children:[Object(u.jsx)(O.a,{path:"/editor",children:Object(u.jsx)(y,{})}),Object(u.jsx)(O.a,{path:"/:flowhash?",children:Object(u.jsx)(g,{story:i.story})})]})})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,197)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),s(e),r(e),o(e),a(e)}))};a.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(v,{})}),document.getElementById("root")),S()},29:function(e){e.exports=JSON.parse('{"story":{"name":"Dragon Story","version":"1.0.0","start":"0","flow":{"0":{"text":"Which region does your [dragon](https://www.google.com/search?q=dragon) come from?","paths":[{"text":"Eastern","next":"10","snippet":"# A Dragon Story...\\nThere once was a dragon from the Eastern region"},{"text":"Western","next":"20","snippet":"# A Dragon Story...\\nThere once was a dragon from the Western region"}]},"3":{"text":"What color is your dragon?","paths":[{"text":"Red","next":"4","snippet":"The dragon was a lovely shade of red,"},{"text":"Green","next":"4","snippet":"The dragon was a lovely shade of green,"},{"text":"Blue","next":"4","snippet":"The dragon was a lovely shade of blue,"}]},"4":{"text":"Where does your dragon want to visit?","paths":[{"text":"The Ocean","snippet":"and wanted to visit the Ocean.\\n\\n"},{"text":"The Forest","snippet":"and wanted to visit the Forest.\\n\\n"},{"text":"The Mountains","snippet":"and wanted to visit the Mountains.\\n\\n"},{"text":"The Plains","snippet":"and wanted to visit the Plains.\\n\\n"},{"text":"The Swamp","snippet":"and wanted to visit the Swamp.\\n\\n"}]},"10":{"text":"Does your dragon have wings?","paths":[{"text":"Yes","next":"3","snippet":"who flew with its wings."},{"text":"No","next":"3","snippet":"who flew without wings."}]},"20":{"text":"Is your dragon Bipedal or Quadpedal?","paths":[{"text":"Bipedal","next":"3","snippet":"with 2 feet and wings for arms."},{"text":"Quadpedal","next":"3","snippet":"with 2 arms, 2 feet and wings."}]}}}}')},81:function(e,t,n){},82:function(e,t,n){}},[[196,1,2]]]);
//# sourceMappingURL=main.50ef9873.chunk.js.map