(this.webpackJsonpstoryflow=this.webpackJsonpstoryflow||[]).push([[0],{196:function(t,e,n){"use strict";n.r(e);var r=n(1),s=n.n(r),o=n(75),a=n.n(o),i=(n(81),n(82),n(23)),l=n(41),c=n(20),h=n(24),d=n.n(h);function j(t){var e=t?t.toString(36):"0";return e.length%2&&(e="0"+e),e}function u(t){try{return parseInt(t,36)}catch(e){return 0}}function f(t){for(var e={},n=0;n<t.length;n+=4){var r=t.substr(n,4),s=u(r.substr(0,2)),o=u(r.substr(2,2));e[String(s)]=String(o)}return e}var p=n(0);var x=function t(e){var n=e.flow,r=e.flowid,s=e.flowhash,o=e.setFlowhash,a=function(){var t=f(s);return t[r]||0===t[r]?t[r]:-1}(),i=function(t){o(r,t.target.value)};return Object(p.jsxs)("div",{className:"flow",children:[Object(p.jsx)(d.a,{children:n[r].text}),Object(p.jsx)("ul",{children:n[r].paths.map((function(t,e){return Object(p.jsx)("li",{children:Object(p.jsxs)("label",{children:[Object(p.jsx)("input",{type:"radio",name:r,value:e,onChange:i,checked:a===String(e)})," ",Object(p.jsx)(d.a,{children:t.text})]})},e)}))}),-1!==a&&n[r].paths[a].next?Object(p.jsx)(t,{flow:n,flowid:n[r].paths[a].next,flowhash:s,setFlowhash:o}):"",Object(p.jsx)("pre",{style:{display:"none"},children:JSON.stringify(n,null,2)})]})},O=n(2),b=n(16);var g=function(t){var e=t.story,n=Object(O.g)().flowhash,o=void 0===n?"":n,a=Object(O.f)(),i=s.a.useState(""),h=Object(c.a)(i,2),u=h[0],g=h[1],y=function(t,e,n){return t[e].paths[n[e]]&&t[e].paths[n[e]].next?t[e].paths[n[e]].next:-1},w=Object(r.useCallback)((function(t,e,n){var r=[];r.push(e);for(var s=y(t,e,n);-1!==s;)r.push(s),s=y(t,s,n);return r}),[]);return Object(r.useEffect)((function(){var t,n="",r=f(o),s=w(e.flow,e.start,r),a=Object(l.a)(s);try{for(a.s();!(t=a.n()).done;){var i=t.value;console.log("snippet"),console.log(i),r[i]&&(n+=e.flow[i].paths[r[i]].snippet+" ")}}catch(c){a.e(c)}finally{a.f()}g(n)}),[o,e,w,g]),Object(p.jsxs)("div",{children:[Object(p.jsxs)("h1",{children:["Hello, it is time for a story ",Object(p.jsx)("span",{style:{display:"none"},children:o})]}),Object(p.jsx)("div",{className:"flowcontainer",children:Object(p.jsx)(x,{flow:e.flow,flowid:e.start,flowhash:o,setFlowhash:function(t,n){var r=f(o);r[t]=n,console.log(typeof t);var s=w(e.flow,e.start,r);console.log(r),console.log(s);var i,c={},h=Object(l.a)(s);try{for(h.s();!(i=h.n()).done;){var d=i.value;console.log(d),console.log(typeof d),r[d]&&(c[d]=r[d])}}catch(u){h.e(u)}finally{h.f()}console.log(c),a.push("/"+function(t){var e="";return Object.keys(t).forEach((function(n){console.log("Before: "+n);var r=j(parseInt(n));console.log("After: "+r),e+=r,e+=j(t[n])})),e}(c)),g("")}})}),Object(p.jsx)("div",{className:"markdowncontainer",children:Object(p.jsx)(d.a,{children:u})}),Object(p.jsx)("pre",{style:{display:"none"},children:JSON.stringify(e,null,2)}),""!==o?Object(p.jsxs)("div",{className:"sharestory",children:["Share your story: ",Object(p.jsx)(b.b,{to:o,children:window.location.href})]}):""]})};var y=function(t){var e=t.flowid,n=t.flow,r=t.story,o=t.setStory,a=s.a.useState(!0),i=Object(c.a)(a,2),l=i[0],h=i[1];return Object(p.jsx)("div",{children:Object(p.jsxs)("fieldset",{children:[Object(p.jsx)("legend",{children:e}),Object(p.jsx)("button",{onClick:function(){var t=JSON.parse(JSON.stringify(r));delete t.story.flow[e],o(t)},children:"Delete Flow"}),Object(p.jsxs)("label",{children:["Text: ",Object(p.jsx)("input",{type:"text",onChange:function(t){var n=JSON.parse(JSON.stringify(r));n.story.flow[e].text=t.target.value,o(n)},value:n.text})]}),Object(p.jsx)("button",{onClick:function(){h(!l)},style:{float:"right"},children:l?"Hide":"Show"}),Object(p.jsxs)("div",{style:{display:l?"block":"none"},children:["Paths:",n.paths.map((function(t,n){return Object(p.jsxs)("fieldset",{children:[Object(p.jsx)("legend",{children:n}),Object(p.jsx)("button",{onClick:function(t){return function(t,n){var s=JSON.parse(JSON.stringify(r));s.story.flow[e].paths.splice(n,1),o(s)}(0,n)},children:"Delete Path"}),Object(p.jsxs)("label",{children:["Text: ",Object(p.jsx)("input",{type:"text",onChange:function(t){return function(t,n){var s=JSON.parse(JSON.stringify(r));s.story.flow[e].paths[n].text=t.target.value,o(s)}(t,n)},value:t.text})]}),Object(p.jsxs)("label",{children:["Next: ",Object(p.jsxs)("select",{onChange:function(t){return function(t,n){var s=JSON.parse(JSON.stringify(r));s.story.flow[e].paths[n].next=t.target.value,o(s)}(t,n)},children:[Object(p.jsx)("option",{children:"[End]"}),Object.keys(r.story.flow).map((function(e,n){return Object(p.jsxs)("option",{value:e,selected:t.next===e,children:["(",e,") ",r.story.flow[e].text]})}))]})]}),Object(p.jsxs)("label",{children:["Snippet: ",Object(p.jsx)("textarea",{onChange:function(t){return function(t,n){var s=JSON.parse(JSON.stringify(r));s.story.flow[e].paths[n].snippet=t.target.value,o(s)}(t,n)},defaultValue:t.snippet})]}),Object(p.jsxs)("label",{children:["Relevant Links: ",Object(p.jsx)("textarea",{onChange:function(t){return function(t,n){var s=JSON.parse(JSON.stringify(r));s.story.flow[e].paths[n].links=t.target.value,o(s)}(t,n)},defaultValue:t.links})]}),Object(p.jsxs)("label",{children:["What We Know: ",Object(p.jsx)("textarea",{onChange:function(t){return function(t,n){var s=JSON.parse(JSON.stringify(r));s.story.flow[e].paths[n].known=t.target.value,o(s)}(t,n)},defaultValue:t.known})]})]},n)})),Object(p.jsx)("button",{onClick:function(){var t=JSON.parse(JSON.stringify(r));t.story.flow[e].paths.push({text:"Path Text...replace me please",next:"",snippet:""}),o(t)},children:"Add Path"})]})]})})};var w=function(){var t=s.a.useState(localStorage.getItem("editorstory")?JSON.parse(localStorage.getItem("editorstory")):i),e=Object(c.a)(t,2),n=e[0],r=e[1];return s.a.useEffect((function(){localStorage.setItem("editorstory",JSON.stringify(n))}),[n]),Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:"Editor"}),Object(p.jsxs)("div",{className:"flowcontainer",children:[Object(p.jsxs)("label",{children:["Title: ",Object(p.jsx)("input",{type:"text",onChange:function(t){console.log("handleTitle: "+t.target.value);var e=JSON.parse(JSON.stringify(n));e.story.name=t.target.value,r(e)},value:n.story.name})]}),Object.keys(n.story.flow).map((function(t,e){return Object(p.jsx)(y,{flowid:t,flow:n.story.flow[t],story:n,setStory:r},e)})),Object(p.jsx)("button",{onClick:function(){var t=JSON.parse(JSON.stringify(n)),e=function(t){var e=0;return Object.keys(t).map((function(t){return parseInt(t)>=e&&(e=parseInt(t)+1),""})),e+""}(t.story.flow);console.log("trying to add... "+e),t.story.flow[e]={text:"Flow Text...replace me please",paths:[{text:"Path Text...replace me please",next:"",snippet:""}]},r(t)},children:"Add Flow"})]}),Object(p.jsx)("div",{className:"markdowncontainer",children:Object(p.jsx)("pre",{children:JSON.stringify(n,null,2)})}),Object(p.jsx)("button",{onClick:function(){localStorage.clear()},children:"Clear Local Storage"})]})};var v=function(){var t=localStorage.getItem("editorstory")?JSON.parse(localStorage.getItem("editorstory")):i;return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(b.a,{children:Object(p.jsxs)(O.c,{children:[Object(p.jsxs)(O.a,{path:"/editor",children:[Object(p.jsx)(b.b,{to:"/preview",children:"Preview"}),Object(p.jsx)(w,{})]}),Object(p.jsxs)(O.a,{path:"/preview",children:[Object(p.jsx)(b.b,{to:"/editor",children:"Edit"}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{onClick:function(){return window.location.reload()},children:"Refresh"}),Object(p.jsx)(g,{story:t.story})]}),Object(p.jsxs)(O.a,{path:"/:flowhash?",children:[Object(p.jsx)(b.b,{to:"/editor",children:"Play around with your own story..."}),Object(p.jsx)(g,{story:i.story})]})]})})})},S=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,197)).then((function(e){var n=e.getCLS,r=e.getFID,s=e.getFCP,o=e.getLCP,a=e.getTTFB;n(t),r(t),s(t),o(t),a(t)}))};a.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(v,{})}),document.getElementById("root")),S()},23:function(t){t.exports=JSON.parse('{"story":{"name":"Dragon Story","version":"1.0.0","start":"0","flow":{"0":{"text":"Which region does your [dragon](https://www.google.com/search?q=dragon) come from?","paths":[{"text":"Eastern","next":"10","snippet":"# A Dragon Story...\\nThere once was a dragon from the Eastern region"},{"text":"Western","next":"20","snippet":"# A Dragon Story...\\nThere once was a dragon from the Western region"}]},"3":{"text":"What color is your dragon?","paths":[{"text":"Red","next":"4","snippet":"The dragon was a lovely shade of red,"},{"text":"Green","next":"4","snippet":"The dragon was a lovely shade of green,"},{"text":"Blue","next":"4","snippet":"The dragon was a lovely shade of blue,"}]},"4":{"text":"Where does your dragon want to visit?","paths":[{"text":"The Ocean","snippet":"and wanted to visit the Ocean.\\n\\n"},{"text":"The Forest","snippet":"and wanted to visit the Forest.\\n\\n"},{"text":"The Mountains","snippet":"and wanted to visit the Mountains.\\n\\n"},{"text":"The Plains","snippet":"and wanted to visit the Plains.\\n\\n"},{"text":"The Swamp","snippet":"and wanted to visit the Swamp.\\n\\n"}]},"10":{"text":"Does your dragon have wings?","paths":[{"text":"Yes","next":"3","snippet":"who flew with its wings."},{"text":"No","next":"3","snippet":"who flew without wings."}]},"20":{"text":"Is your dragon Bipedal or Quadpedal?","paths":[{"text":"Bipedal","next":"3","snippet":"with 2 feet and wings for arms."},{"text":"Quadpedal","next":"3","snippet":"with 2 arms, 2 feet and wings."}]}}}}')},81:function(t,e,n){},82:function(t,e,n){}},[[196,1,2]]]);
//# sourceMappingURL=main.71908d35.chunk.js.map