(this.webpackJsonpstoryflow=this.webpackJsonpstoryflow||[]).push([[0],{196:function(t,e,n){"use strict";n.r(e);var s=n(0),o=n.n(s),r=n(71),a=n.n(r),i=(n(81),n(82),n(72)),c=n(73),l=n(76),h=n(74),d=n.n(h);function p(t){var e=t?t.toString(36):"0";return e.length%2&&(e="0"+e),e}function f(t){try{return parseInt(t,36)}catch(e){return 0}}function u(t){for(var e={},n=0;n<t.length;n+=4){var s=t.substr(n,4),o=f(s.substr(0,2)),r=f(s.substr(2,2));e[String(o)]=String(r)}return e}var x=n(1);var j=function t(e){var n=e.flow,s=e.flowid,o=e.flowhash,r=e.setFlowhash,a=function(){var t=u(o);return t[s]||0===t[s]?t[s]:-1}(),i=function(t){r(s,t.target.value)};return Object(x.jsxs)("div",{className:"flow",children:[Object(x.jsx)("p",{children:n[s].text}),Object(x.jsx)("ul",{children:n[s].paths.map((function(t,e){return Object(x.jsx)("li",{children:Object(x.jsxs)("label",{children:[Object(x.jsx)("input",{type:"radio",name:s,value:e,onChange:i,checked:a===String(e)})," ",t.text]})},e)}))}),-1!==a&&n[s].paths[a].next?Object(x.jsx)(t,{flow:n,flowid:n[s].paths[a].next,flowhash:o,setFlowhash:r}):"",Object(x.jsx)("pre",{style:{display:"none"},children:JSON.stringify(n,null,2)})]})},w=n(2),g=n(27);var v=function(t){var e=t.story,n=Object(w.g)().flowhash,r=void 0===n?"":n,a=Object(w.f)(),i=o.a.useState(""),h=Object(l.a)(i,2),f=h[0],v=h[1],b=function(t,e,n){return t[e].paths[n[e]]&&t[e].paths[n[e]].next?t[e].paths[n[e]].next:-1};return Object(s.useEffect)((function(){for(var t="",n=u(r),s=0,o=Object.keys(n);s<o.length;s++){var a=o[s];t+=e.flow[a].paths[n[a]].snippet+" "}v(t)}),[r,e,v]),Object(x.jsxs)("div",{children:[Object(x.jsxs)("h1",{children:["Hello, it is time for a story ",Object(x.jsx)("span",{style:{display:"none"},children:r})]}),Object(x.jsx)("div",{className:"flowcontainer",children:Object(x.jsx)(j,{flow:e.flow,flowid:e.start,flowhash:r,setFlowhash:function(t,n){var s=u(r),o="";s[t]=n,console.log(typeof t);var i=function(t,e,n){var s=[];s.push(e);for(var o=b(t,e,n);-1!==o;)s.push(o),o=b(t,o,n);return s}(e.flow,e.start,s);console.log(s),console.log(i);var l,h={},d=Object(c.a)(i);try{for(d.s();!(l=d.n()).done;){var f=l.value;console.log(f),console.log(typeof f),s[f]&&(h[f]=s[f],o+=e.flow[f].paths[h[f]].snippet+" ")}}catch(x){d.e(x)}finally{d.f()}console.log(h),a.push("/"+function(t){var e="";return Object.keys(t).forEach((function(n){e+=p(n),e+=p(t[n])})),e}(h)),v(o)}})}),Object(x.jsx)("div",{className:"markdowncontainer",children:Object(x.jsx)(d.a,{children:f})}),Object(x.jsx)("pre",{style:{display:"none"},children:JSON.stringify(e,null,2)}),""!==r?Object(x.jsxs)("div",{className:"sharestory",children:["Share your story: ",Object(x.jsx)(g.b,{to:r,children:window.location.href})]}):""]})};var b=function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)(g.a,{children:Object(x.jsx)(w.c,{children:Object(x.jsx)(w.a,{path:"/:flowhash?",children:Object(x.jsx)(v,{story:i.story})})})})})},y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,197)).then((function(e){var n=e.getCLS,s=e.getFID,o=e.getFCP,r=e.getLCP,a=e.getTTFB;n(t),s(t),o(t),r(t),a(t)}))};a.a.render(Object(x.jsx)(o.a.StrictMode,{children:Object(x.jsx)(b,{})}),document.getElementById("root")),y()},72:function(t){t.exports=JSON.parse('{"story":{"name":"Dragon Story","version":"1.0.0","start":"0","flow":{"0":{"text":"Which region does your dragon come from?","paths":[{"text":"Eastern","next":"1","snippet":"# A Dragon Story...\\nThere once was a dragon from the Eastern region"},{"text":"Western","next":"2","snippet":"# A Dragon Story...\\nThere once was a dragon from the Western region"}]},"1":{"text":"Does your dragon have wings?","paths":[{"text":"Yes","next":"3","snippet":"who flew with its wings."},{"text":"No","next":"3","snippet":"who flew without wings."}]},"2":{"text":"Is your dragon Bipedal or Quadpedal?","paths":[{"text":"Bipedal","next":"3","snippet":"with 2 feet and wings for arms."},{"text":"Quadpedal","next":"3","snippet":"with 2 arms, 2 feet and wings."}]},"3":{"text":"What color is your dragon?","paths":[{"text":"Red","next":"4","snippet":"The dragon was a lovely shade of red,"},{"text":"Green","next":"4","snippet":"The dragon was a lovely shade of green,"},{"text":"Blue","next":"4","snippet":"The dragon was a lovely shade of blue,"}]},"4":{"text":"Where does your dragon want to visit?","paths":[{"text":"The Ocean","snippet":"and wanted to visit the Ocean.\\n\\n"},{"text":"The Forest","snippet":"and wanted to visit the Forest.\\n\\n"},{"text":"The Mountains","snippet":"and wanted to visit the Mountains.\\n\\n"},{"text":"The Plains","snippet":"and wanted to visit the Plains.\\n\\n"},{"text":"The Swamp","snippet":"and wanted to visit the Swamp.\\n\\n"}]}}}}')},81:function(t,e,n){},82:function(t,e,n){}},[[196,1,2]]]);
//# sourceMappingURL=main.30177bef.chunk.js.map